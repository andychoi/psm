<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.css">

	{% block metatags %}
	<title>{{ object.title }}</title>
	{% endblock %}

	<style type="text/css">
		.fixed-panel {
			min-height: 140px;
			max-height: 300px;
		}
/*		.panel-body {background:#f8f9fa;;} */
		.panel-heading {background-color: #dee2e6; font-weight: 600;}
		.panel-body-border { 
    		border: 1px solid #dee2e6 !important;
		}
		/*text area to keep new line */
		label {
			white-space: pre-wrap;
		}
		#myleft > .panel.mypadding-top {
			padding-top: 10px;
		}
	</style>
</head>


<body>
	<div class="container mt-3">  <!-- container-float margin top 3 -->
		<div class="row">
			<div class="col-8">
				<h4 class="font-weight-bold"><u>PROJECT DASHBOARD</u></h4>
				<p></p>
		  	</div>
		  	<div class="col-4 text-nowrap float-end" >
			<p class="text-end m-0 small"></p>
			</div>
		</div>
		<div class="row">
            <div class="input-group">
                <!-- <label>
                    Status
                    <select>
                    </select>
                </label>
                <label>
                    Status
                    <select></select>
                </label> -->
                <label>
                    CBU
                    <select id='sel_cbu' onchange="updateData()">
                        <option value=''>ALL</option>
                        {% for pItem in filter_CBU.items %}
                        <option value={{ pItem.id }}>{{ pItem.name }}</option>
                        {% endfor %}
                    </select>
                </label>
            </div>
    
            <!-- Filter  div class="input-group"> <span class="input-group-addon">Filter</span>
                <input id="filter" type="text" class="form-control" placeholder="Type here...">
            </div -->            
            <!-- table-sm : smaller padding -->
            {% if object_list %}
            <table data-toggle="table" data-pagination="true" data-page-size="25" data-page-list="[10, 25, 50, 100, all]"
                data-search="true" data-filter-control="true" data-show-search-clear-button="true" data-show-refresh="true"
                id="milestonetbl" class="table table-striped table-bordered table-sm small">
                <thead class="table-light">
                <tr>
                    <th data-sortable="true" scope="col">CBU</th>
                    <th scope="col">Project</th>
                    <th data-searchable="false" scope="col">Project-Name</th>
                    <th data-sortable="true" scope="col">Progress</th>
                    <th data-sortable="true" scope="col">Phase</th>
                    <th scope="col">HAEA PM</th>
                    <th data-sortable="true" scope="col">HAEA Dept</th>
                    <!-- th data-sortable="true" scope="col">CBU PM</th-->
                    <th scope="col">Initiation</th>
                    <th scope="col">Design</th>
                    <th scope="col">Develop</th>
                    <th scope="col">Test</th>
                    <th scope="col">Launch</th>
                    <th scope="col">Schedule</th>
                    <th scope="col">Scope</th>
                    <th scope="col">Budget</th>
                </tr>
                </thead>
                <tbody>
                    {% for p in object_list %}
                <tr> <!-- https://getbootstrap.com/docs/4.1/components/badge/ https://icons.getbootstrap.com/ <i class="bi-class-name"></i> -->
                     <!-- p.status_t|slice:"0:1" -->
                    <td>{{ p.CBU }}</td>
                    <td scope="row">{{ p.PJcode }}</td>
                    <td class="text-left">{{ p.title }}</td>
                    <td class="text-center">
                        <div class="progress">
                            <div class="progress-bar" role="progressbar" style="width: {{ p.progress }}%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{ p.progress }}%</div>
                        </div>
                    </td>
                    <td>{{ p.phase }}</td>
                    <td>{{ p.user }}</td>
                    <td>{{ p.dept }}</td>
                    <!--td>{{ p.CBUpm }}</td-->
                    <td class="text-center">{% if p.a_pre_plan_e %} <i class="text-success bi-check-square-fill"> {% else %} <i class="text-success bi-dash-square-dotted"> </i> {% endif %}</td>
                    <td class="text-center">{% if p.a_design_e %}   <i class="text-success bi-check-square-fill"> {% else %} <i class="text-success bi-dash-square-dotted"> </i> {% endif %}</td>
                    <td class="text-center">{% if p.a_dev_e %}      <i class="text-success bi-check-square-fill"> {% else %} <i class="text-success bi-dash-square-dotted"> </i> {% endif %}</td>
                    <td class="text-center">{% if p.a_uat_e  %}     <i class="text-success bi-check-square-fill"> {% else %} <i class="text-success bi-dash-square-dotted"> </i> {% endif %}</td>
                    <td class="text-center">{% if p.a_launch %}     <i class="text-success bi-check-square-fill"> {% else %} <i class="text-success bi-dash-square-dotted"> </i> {% endif %}</td>
                    <td class="text-center">
                        {%   if p.status_t|slice:'0:1' == '1' %}<i class="text-success bi-check-circle-fill"></i>
                        {% elif p.status_t|slice:'0:1' == '2' %}<i class="text-warning bi-exclamation-circle"></i>
                        {% elif p.status_t|slice:'0:1' == '3' %}<i class="text-danger  bi-exclamation-circle-fill"></i>
                        {% elif p.status_t|slice:'0:1' == '9' %}<i class="text-primary bi-circle-fill"></i>
                        {% else %}<i class="text-secondary  bi-dash-circle-dotted"></i>
                        {% endif %}</td>
                    <td class="text-center">
                        {%   if p.status_s|slice:'0:1' == '1' %}<i class="text-success bi-check-circle-fill"></i>
                        {% elif p.status_s|slice:'0:1' == '2' %}<i class="text-warning bi-exclamation-circle"></i>
                        {% elif p.status_s|slice:'0:1' == '3' %}<i class="text-danger  bi-exclamation-circle-fill"></i>
                        {% elif p.status_s|slice:'0:1' == '9' %}<i class="text-primary bi-circle-fill"></i>
                        {% else %}<i class="text-secondary  bi-dash-circle-dotted"></i>
                        {% endif %}</td>
                    <td class="text-center">
                        {%   if p.status_b|slice:'0:1' == '1' %}<i class="text-success bi-check-circle-fill"></i>
                        {% elif p.status_b|slice:'0:1' == '2' %}<i class="text-warning bi-exclamation-circle"></i>
                        {% elif p.status_b|slice:'0:1' == '3' %}<i class="text-danger  bi-exclamation-circle-fill"></i>
                        {% elif p.status_b|slice:'0:1' == '9' %}<i class="text-primary bi-circle-fill"></i>
                        {% else %}<i class="text-secondary  bi-dash-circle-dotted"></i>
                        {% endif %}</td>

                </tr>						
                {% endfor %}	
                </tbody>
            </table>
            <p class="text-end text-muted small m-0 "><i class="text-success bi-check-circle-fill"></i>Good | <i class="text-warning bi-exclamation-circle"></i>Issue | <i class="text-danger  bi-exclamation-circle-fill"></i>Roadblocks | <i class="text-primary bi-circle-fill"></i>Complete | <i class="text-secondary  bi-dash-circle-dotted"></i>Not started</p>
            {# .... **Now the pagination section** .... #}
            {% if is_paginated %}
                <div class="pagination small">
                    <span class="page-links">
                        {% if page_obj.has_previous %}
                            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
                        {% endif %}
                        <span class="page-current">
                             {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
                        </span>
                        {% if page_obj.has_next %}
                            <a href="?page={{ page_obj.next_page_number }}">next</a>
                        {% endif %}
                    </span>
                </div>
            {% endif %}
        {% else %}
            <p>No records found!!! :(</p>
        {% endif %}
        {# .... **More content, footer, etc.** .... #}

		</div>		
	</div>


    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
	<!--script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script-->
    <!-- script src="/static/reports/css/jquery.table.marge.js"></script>
    <script>
        $('#milestonetbl').margetable({
            type: 2,
            colindex: [0]
        });
    </script-->

	<!-- Load React. -->
    <!-- Note: when deploying, replace "development.js" with "production.min.js". -->
    <!-- script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    -->

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.js"></script>

    <script>
       $('#sel_cbu').val("{{ filter_CBU.selected }}");
       function updateData() {
           window.location.href = '/project/?cbu=' + $('#sel_cbu').val();
       }
    </script>    
</body>
</html>