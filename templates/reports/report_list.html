{% extends "base.html" %}
{% block content %}
<!-- Search Form -->
<!-- <form class="form-inline my-2 my-lg-0 pb-2">
    <input class="form-control mr-sm-2" name="q" type="search" placeholder="Search" aria-label="Search" style="width: 400px">
    <input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Search"> -->
<!-- </form>  -->
<!-- https://bootstrap-table.com/ -->
<h3>Status report list</h3>
{% if object_list %}
    <div class="col m-2" id="report-list">

      <table data-toggle="table" data-pagination="true" data-page-size="25" data-page-list="[10, 25, 50, 100, all]"
      data-search="true" data-filter-control="true" data-show-search-clear-button="false" data-show-refresh="false"
      data-toolbar="#toolbar" data-show-toggle="true" data-show-columns="true"
      id="table" class="col table table-striped table-bordered table-sm small">
      <thead class="table-light">
      <tr>
          <th data-sortable="true" scope="col">CBU</th>
          <th data-sortable="true" scope="col">Title</th>
          <th data-sortable="true" scope="col">Reported</th>
          <th data-sortable="true" scope="col">Updated_by</th>
          <th data-sortable="true" scope="col">Project</th>
          <th data-sortable="true" scope="col" class="text-center">Status</th>
          <th data-sortable="true" scope="col">Progress%</th>
          <th data-sortable="true" scope="col">Phase</th>
          <th data-sortable="true" scope="col">HAEA PM</th>
      </tr>
      </thead>
      <tbody>
        
        {% for report in report_list %}
          <tr>
            <td>{{ report.CBU }}</td> 
            <td class="report-count-{{ forloop.counter }}">
            <a class="article-title" href="{% url 'report_detail' report.pk %}" target="blank">{{ report.title }}</a> </td> 
            <td>{{ report.updated_on|date:'Y-m-d' }}</td>               
            <td>{{ report.updated_by }}</td> 
            <td>{{ report.project }}</td> 
            <td class="text-center"> 
            {%   if report.status_o|slice:'0:1' == '1' %}<i class="text-success bi-check-circle-fill"></i>
            {% elif report.status_o|slice:'0:1' == '2' %}<i class="text-warning bi-exclamation-circle"></i>
            {% elif report.status_o|slice:'0:1' == '3' %}<i class="text-danger  bi-exclamation-circle-fill"></i>
            {% elif report.status_o|slice:'0:1' == '9' %}<i class="text-primary bi-circle-fill"></i>
            {% else %}<i class="text-secondary  bi-dash-circle-dotted"></i>
            {% endif %}</td>
            <td class="text-center">
              <div class="progress">
                  <div class="progress-bar" role="progressbar" style="width: {{ report.project.progress }}%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{ report.project.progress }}%</div>
              </div>
            </td>
            <td>{{ report.project.phase|slice:"2:" }}</td> 
            <td>{{ report.project.user }}</td> 
          </tr>
        {% endfor %}
        </tbody></table>
    </div>

    {% if is_paginated %}
      {% if page_obj.has_previous %}
        <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Previous</a>
      {% endif %}

      {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
          <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
          <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
        {% endif %}
      {% endfor %}

      {% if page_obj.has_next %}
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Next</a>
        <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
      {% endif %}
    {% endif %}


{% else %}
  <p>No published report found!!! :(</p>
{% endif %}

{% endblock content %}