{% extends "base.html" %}

{% block child_css %}
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.css">
{% endblock %}


{% block content %}
<div class="container-fluid">
<!-- Search Form -->
<!-- <form class="form-inline my-2 my-lg-0 pb-2">
    <input class="form-control mr-sm-2" name="q" type="search" placeholder="Search" aria-label="Search" style="width: 400px">
    <input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Search"> -->
<!-- </form>  -->
<!-- https://bootstrap-table.com/ -->
<h5 class="md-4">Status report list - latest 500</h5>
{% if object_list %}
    <div class="col m-2" id="report-list">

      <table data-toggle="table" data-pagination="true" data-page-size="25" data-page-list="[10, 25, 50, 100, all]"
      data-search="true" data-filter-control="true" data-show-search-clear-button="false" data-show-refresh="false"
      data-toolbar="#toolbar" data-show-toggle="true" data-show-columns="true"
      id="table" class="col table table-striped table-bordered table-sm small">
      <thead class="table-light">
      <tr>
          <th data-sortable="true" scope="col">CBU</th>
          <th data-sortable="true" scope="col">Title</th>
          <th data-sortable="true" scope="col">Reported</th>
          <th data-sortable="true" scope="col">Updated_by</th>
          <th data-sortable="true" scope="col">Project</th>
          <th data-sortable="true" scope="col" class="text-center">Health</th>
          <th data-sortable="true" scope="col">Progress%</th>
          <th data-sortable="true" scope="col">Phase</th>
          <th data-sortable="true" scope="col">HAEA PM</th>
      </tr>
      </thead>
      <tbody>
        
        {% for report in report_list %}
          <tr>
            <td>{{ report.CBU }}</td> 
            <td class="report-count-{{ forloop.counter }}">
            <a class="article-title" href="{% url 'report_detail' report.pk %}" target="blank">{{ report.title }}</a> </td> 
            <td>{{ report.updated_on|date:'Y-m-d' }}</td>               
            <td>{{ report.updated_by }}</td> 
            <td><a href="/admin/psm/project/{{ report.project.pk }}">{{ report.project }}</a></td> 
            <td class="text-center"> 
            {%   if report.status_o|slice:'0:1' == '1' %}<i class="text-success bi-check-circle-fill"></i>
            {% elif report.status_o|slice:'0:1' == '2' %}<i class="text-warning bi-exclamation-circle"></i>
            {% elif report.status_o|slice:'0:1' == '3' %}<i class="text-danger  bi-exclamation-circle-fill"></i>
            {% elif report.status_o|slice:'0:1' == '9' %}<i class="text-primary bi-circle-fill"></i>
            {% else %}<i class="text-secondary  bi-dash-circle-dotted"></i>
            {% endif %}</td>
            <td class="text-center">
              <div class="progress">
                  <div class="progress-bar" role="progressbar" style="width: {{ report.project.progress }}%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">{{ report.project.progress }}%</div>
              </div>
            </td>
            <td>{{ report.project.phase|slice:"2:" }}</td> 
            <td>{{ report.project.pm }}</td> 
          </tr>
        {% endfor %}
        </tbody></table>
    </div>

    {% include "includes/pagination.html" %}



{% else %}
  <p>No published report found!!! :(</p>
{% endif %}

</div>
{% endblock content %}



{% block child_js_above_files %} 
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>    
<script src="https://unpkg.com/bootstrap-table@1.20.2/dist/bootstrap-table.min.js"></script>
<!--script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
  integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
</script-->
{% endblock %}
